<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .boxx {
            border: 1px solid #000;
            padding: 20px;
        }

        .box1 {
            background-color: yellowgreen;
        }

        .box2 {
            background-color: green;
        }

        .box3 {
            background-color: springgreen;
        }
    </style>
</head>

<body>
    <!-- 정규식은 어디서든 사용가능함 c, 자바 ,자바스크립 등등등 -->
    <h1>Regular Expression</h1>
    <input type="button" value="기본" onclick="test1();">
    <input type="button" value="flag - g | i | m" onclick="test2();">
    <input type="button" value="anchor - ^ | $" onclick="test3();">
    <input type="button" value="@실습문제" onclick="test4();">
    <input type="button" value="." onclick="test5();">
    <input type="button" value="[]" onclick="test6();">
    <input type="button" value="@실습문제" onclick="test7();">
    <input type="button" value="\d \w \s" onclick="test8();">
    <input type="button" value="( | )" onclick="test9();">
    <input type="button" value="escaping" onclick="test10();">
    <input type="button" value="* + ?" onclick="test11();">
    <input type="button" value="{n,m}" onclick="test12();">
    <input type="button" value="look around" onclick="test13();">
    <div id="area"></div>
    <!-- 이거는 이해한다라기 보다는 암기의 영역임... -->

    <script>
        var mark = "<mark>$&</mark>";
        function test1() {
            /*
                정규표현식
                 - 특정 규칙을 가진 문자열 집합에 대한 형식언어
                 - 유효성검사, 검색, 문자열치환작업등에서 효율적인 처리가 가능
                 - 간결한 코드를 만드는 표현식 숙지가 쉽지 않으며, 언어독립적으로
                 동작한다.
            */
            // 정규식 객체생성
            var re1 = /a/;
            var re2 = new RegExp(/[0-9]/);//123456789를 줄여서 쓴거임
            var re3 = new RegExp("[a-z]");

            // 정규표현식의 메서드
            // test() : boolean
            console.log(re1.test('abcde'));
            console.log(re1.test('bcdef'));//a가없어서 false

            console.log(re2.test('honggd123'));
            console.log(re2.test('honggd!!')); // 숫자가 없어서 false

            // 문자열의 정규식 활용 메서드
            // match
            console.log('cba'.match(re1));

            // search : 일치하는 인덱스
            //    console.log('skasweeknse'.search(re1));
            var str = 'skasweeanse';
            console.log("1회", re1.exec(str));
            console.log("2회", re1.exec(str));

            // replace
            //    console.log('skaswakaea'.replace(re1, 'A'));
            console.log('skaswakaea'.replace(/a/g, 'A'));// a는 전부다 A로 바꿔
        }


        /*
            flag문자
             - g(global) : 정규식에 대한 전역비교를 수행하는 기호
             - i(ignore) : 영문자중 대소문자를 구분하지 않고 비교를수행
             - m(multi-line) : 개행문자를 기준으로 여러줄이 있는 경우, 줄단위 비교를 수행
        */
        function test2() {
            var str = "Javascript jQuery Ajax";

            // $&는 매칭된 text는 가리키는 키워드
            // area.innerHTML = str.replace(/a/gi,"<mark>$$</mark>");
            // area.innerHTML = str.replace(/a/gi,"<mark>&&</mark>");
            area.innerHTML = str.replace(/a/gi, "<mark>$&</mark>");
            //a 마킹
        }


        /*
            anchor문자
             - ^ : 문자열 시작
             - $ : 문자열 끝
        */
        function test3() {
            var str = "Javascript\nxxx\njQuery\nAjax";
            area.innerHTML =
                // str.replace(/^j/igm,"<mark>$&</mark>");//j로 시작하면 마킹
                str.replace(/x$/igm, "<mark>$&</mark>");//x로 시작하면 마킹
        }

        /**
        * 사용자로부터 문자열을 입력받고(prompt),
        * k로 시작하면서, h로 끝나는 경우에는 잘하셨습니다.
        * 아닌 경우,한 문자가 아닙니다. 경고창을 띄우세요.
        */
        function test4() {
            var str = prompt("문자열을 입력하세요..");
            var re1 = /^k/gmi;
            var re2 = /h$/gmi;

            if (re1.test(str) && re2.test(str)) {
                alert("잘하셨습니다.");
            } else {
                alert("적합한 문자가 아닙니다");
            }
        }

        /*
            DOT
            . 포인트 임의의 "한글자"
        */
        function test5() {
            var re1 = /^...$/;
            console.log(re1.test('ab'));
            console.log(re1.test('abc'));// 3글자만 찾기
            console.log(re1.test('abcd'));

            var re2 = /a.b/g;//엥커문자없으면 전체문자에 서a0b인거 찾는거임(abb, aab,...)
            area.innerHTML =
                "ab aab aaab".replace(re2, mark);

            var re3 = /in..$/;
            ["goingo", "goin", "gointo", "going"]
                .forEach(function (s) {
                    console.log(s, re3.test(s))
                })

            var re4 = /^c...k$/; // c로시작하고 중간에 3글자 들어가고 k로끝나느거
            ["ck", "cbk", "cbak", "cbawk", "caaaak"]
                .forEach(function (s) {
                    console.log(re4.test(s));
                })
        }

        function test6() {
            /*
                []
                 - 한글자를 의미하며, 문자의 범위를 나타낸다
                 - 대괄호안에 사용되는 ^는 특정문자는 제외하겠다는 의미를 가진다.
            */
            // var s = "Javascript jquery Ajax 12345";

            // a또는 j문자를 찾아서 mark로 변환
            // area.innerHTML = 
            // s.replace(/[aj]/g, mark);
            // a또는 j가 아닌 문자를 mark로 변환
            // s.replace(/[^aj]/g, mark);

            // 영어 대문자패턴을 모드 찾아서 mark로 변환
            // s.replace(/[A-Z]/g , mark);
            // s.replace(/[0-9]/g , mark);

            // 영어대문자와 + 숫자패턴
            // s.replace(/[A-Z0-9a-z]/g,mark);
            // s.replace(/[A-Z0-9]/g,mark);

            // 한글패턴
            var hangul = "안녕 나는 james입니다.ㅋㅋ카ㅏㅏ ???"
            area.innerHTML =
                // hangul.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, mark);
                hangul.replace(/[가-힣??]/g, mark);
        }

        function test7() {
            /**
            * 1. 사용자로 숫자로 시작되지 않는 id를 검사.
            * 2. 숫자4자리인 비밀번호 여부 검사.
            *
            * 유효하지 않은 경우, alert창 띄우기.
            *
            */
            //    var user = prompt("id 입력");
            //    var pass = prompt("비번 입력");

            //    var re1 = /^[A-Z]/i;
            //    if(re1.test(user)){
            //     alert("굿");
            //    }else{
            //     alert("잘못된 아이디");
            //    }

            //    var re2 = /..../i;
            //    if(re2.test(pass)){
            //     alert("굿");
            //    }else{
            //     alert("4자리초과");
            //    }
            var user = prompt("id 입력");

            if (!/^[0-9]/.test(user)) {
                alert("잘못된 아이디");
                return;
            }

            var pass = prompt("비번 입력");
            if (!/^[0-9][0-9][0-9][0-9]$/.test(pass)) {
                alert("잘못된 비번");
                return;
            }
        }

        function test8() {
            /*
                문자클래스
                \d decimal 숫자 == [0-9]
                \w word 영문자, 숫자, _ == [a-zA-Z0-9_]
                \s space 공백문자, 탭, 개행문자 == [ \t\n]

                \D 숫자가 아닌 문자 == [^0-9]
                \W 영문자, 숫자, _가 아닌 문자 == [^a-zA-Z0-9]
                \S 공백문자, 탭, 개행문자가 아닌 문자 
            */
            var s = "A1 B2 c3 d_4 e:5' ` ffGG6767--__--!\"@#$%^&*()     가\n나\n다\n";

            area.innerHTML =
                //    s.replace(/\d/g, mark);
                //    s.replace(/\w/g, mark);
                //    s.replace(/\s/g, mark);

                //    s.replace(/[^0-9]/g,mark);
                //    s.replace(/\D/g,mark);

                // s.replace(/[ \t\n]/g,mark);
                s.replace(/[!\"@#$%^&*()]/g, mark);
        }


        /*
            () 그룹핑
            | or선택자
        */
        function test9() {
            var s = "월요일에는 월요병, 화요일은 화가 부글부글, "
                + "수요일은 술이 확 땡긴다. 목요일이 목이 컥 막히고, 금요일은 금방 올거 같지 않다.";

            area.innerHTML =
                //   s.replace(/(수요일|목요일|금요일)/g , mark);
                //   s.replace(/(수|목|금)요일/g , mark);
                s.replace(/[수목금]요일/g, mark);
        }

        function test10() {
            /*
                escaping문자
                 - 메타문자를 실제문자값으로 사용할려면, \(역슬래시)를 통해 excaping
                 처리한다.
                 - []안에서는 escaping이 필요 없다.(단 ,시작 ^은 부정의 의미를 가짐)
            */
            var s = "$12$ \\-\\ $25$";

            area.innerHTML =
                //    s.replace(/\$/g, mark);
                // s.replace(/^\$/g, mark);
                s.replace(/\$$/g, mark);
        }

        function test11() {
            /*
                수량자

                a* a가 0개이상인 패턴
                a+ a가 1개이상인 패턴
                a? a가 0개 | 1개
            */
            var s = "aabc abc bc aaaaaaaaabbbbbccc";
            area.innerHTML =
                //s.replace(/a*b/g , mark);
                //s.replace(/a+b/g , mark); // k.*h;
                s.replace(/a?b/g, mark)
        }

        function test12() {
            /*
                수량표현
                a{5} a가 5개
                a{2,5} a가 2개이상 5개 이하
                a{3,} a가 3개 이상
                이하는 없음

                * -> {0,} 0개 이상
                + -> {1,} 1개 이상
                ? -> {0,1} 0혹은 1
            */
            // var s = "aa aba abba abbba aaaaaaaaabbbbbaaabbaaa";
            // area.innerHTML =
            // s.replace(/ab{3}a/g,mark);
            // s.replace(/ab{1,2}a/g,mark);
            // s.replace(/ab{2,}a/g, mark);

            //숫자로시작하고, 영문자3글자이상 나오고, .마침표로 끝나는 문자열을 검사하는 정규식 작성
            // true : 1abc안녕하세요. 3xyzkkk. 1ABC.
            // false : 100 1cbㅋㅋㅋ. 아아아아.
            // var re = /^[0-9][a-zA-Z]{3,}.{0,}[.]$/;
            var re = /^\d[a-zA-Z]{3,}.*\.$/;

            ["1abc안녕하세요.", "3xyzkkk.", "1ABC."].forEach(function (s) {
                console.log(re.test(s)); // true
            });

            ["100", "1cbㅋㅋㅋ.", "아아아아.", "1가나다abc.", "123abc다나가."].forEach(function (s) {
                console.log(re.test(s)); // false
            });
        }


        function test13() {
            /*
             Look Around
              - 탐색문법

             1. look ahead(전방탐색)
              - xxx(?=(re))
              - xxx다음 re와 일치하는 패턴을 검색
              - 최종 반환되는 패턴을 xxx만 반환

             2. look behind(후방탐색)
              - (?<=(re))xxx : xxx앞에 re과 일치하는 요소가 있다면 xxx반환
              - (?<!=(re))xxx : xxx앞에 re과 일치하지 않는 요소가 있다면 xxx반환
            */
            var s = "hello world hello tom hello Jane";
            area.innerHTML =
                // s.replace(/hello(?=(world))/g, mark);
                s.replace(/hello(?!(world))/g, mark);

            var s2 = "hello world lotte world t world";
            // area.innerHTML = s2.replace(/(?<=(hello ))world/g, mark);
            area.innerHTML = s2.replace(/(?<!(hello ))world/g, mark);


        }
    </script>

</body>

</html>